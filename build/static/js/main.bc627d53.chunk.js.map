{"version":3,"sources":["component/error-indicator/ic_error.png","api/index.js","store/channels/actions.js","store/channels/selectors.js","component/ctrl-input/index.js","component/spinner/index.js","component/error-indicator/index.js","component/button/index.js","container/channels/channel-item/index.js","container/channels/index.js","store/teleprograms/actions.js","store/teleprograms/selectors.js","container/teleprograms/teleprogram-item/index.js","container/teleprograms/index.js","component/error-wrap/index.js","container/app/index.js","store/channels/reducer.js","store/teleprograms/reducer.js","index.js"],"names":["module","exports","getData","catalog","params","a","url","URL","search","URLSearchParams","toString","fetch","resp","ok","Error","status","json","body","getChannels","getTeleprograms","TYPES","CHANNELS_FETCH","CHANNELS_SUCCESS","CHANNELS_ERROR","selectItems","state","channels","items","CtrlInput","currentValue","onChange","type","className","value","defaultProps","Spinner","ErrorIndicator","err","src","iconUrl","alt","Button","children","onClick","disabled","ChannelItem","replaceTag","description","replace","getBtnDesc","descText","last","exec","getDesc","onProgramClick","ev","props","item","onLoadProgram","stopPropagation","xvid","this","active","isWidthTablet","logo","title","btnDesc","desc","React","PureComponent","Channels","onChannelClick","id","onSelectChannel","setState","activeId","onSearchChange","target","searchValue","searchList","listItems","filter","get","toUpperCase","indexOf","undefined","dispatch","domain","DOMAIN","payload","fetching","fetchError","api","list","console","error","displayChannels","map","channel","key","chid","bind","renderHeader","renderList","Component","connect","ChannelsSelectors","TELEPROGRAMS_FETCH","TELEPROGRAMS_SUCCESS","TELEPROGRAMS_ERROR","teleprograms","TeleprogramItem","isFinish","isContinue","percent","start","startTime","moment","format","currentElemStyle","backgroundImage","style","secInHour","secInMin","Teleprograms","scrollListToElem","currentProgramNode","ReactDOM","findDOMNode","currentProgram","top","getBoundingClientRect","programList","current","scrollTop","clientHeight","getCurrentTime","currentTime","hour","minute","startOf","endTime","endOf","timerId","firstScroll","fetchData","createRef","setInterval","prevProps","selectedChannelId","isPrevProgramsEmpty","isNewChannelId","hasPrograms","getTeleprogramsList","prepareParams","clearInterval","isEmpty","teleprogramsActions","date_from","date_to","time","hh","mm","ss","second","onBackClick","checkedChannel","displayTeleprogram","Fragment","ref","program","index","duration","getTimeInSeconds","Number","renderMessage","teleprogramsSelectors","ErrorWrap","hasError","errorInfo","_","info","stack","App","handleMediaChange","mql","matches","mediaQueryList","window","matchMedia","addListener","displayTeleprograms","initialState","reducer","action","store","createStore","combineReducers","redusers","composeWithDevTools","applyMiddleware","thunk","render","document","querySelector"],"mappings":"+FAAAA,EAAOC,QAAU,k3H,ojBCEXC,EAAO,uCAAG,WAAOC,EAASC,GAAhB,mBAAAC,EAAA,6DACNC,EAAM,IAAIC,IAAJ,UAHQ,wBAGR,OAAsBJ,KAC9BK,OAAS,IAAIC,gBAAgBL,GAAQM,WAF7B,SAIOC,MAAML,GAJb,WAINM,EAJM,QAKFC,GALE,sBAMF,IAAIC,MAAJ,0EAA8BR,GAA9B,+EAAsDM,EAAKG,SANzD,uBAQOH,EAAKI,OARZ,cAQNC,EARM,yBASLA,GATK,4CAAH,wDAeAC,EAAc,SAACd,GACxB,OAAOF,EAAQ,eAAgBE,IAStBe,EAAkB,SAACf,GAC5B,OAAOF,EAAQ,eAAgBE,IC1BtBgB,EAAQ,CACjBC,eAAgB,iBAChBC,iBAAkB,mBAClBC,eAAgB,kBCLb,MAAMC,EAAcC,GAChBA,EAAMC,SAASC,M,OCG1B,MAAMC,EAAY,EAAGC,eAAcC,cACxB,2BAAOC,KAAK,OAAOC,UAAU,YAAYC,MAAOJ,EAAcC,SAAUA,IAQnFF,EAAUM,aAAe,CACrBL,aAAc,GACdC,SAAU,QAGCF,QCEAO,G,OAjBC,WACZ,OACI,yBAAKH,UAAU,WACX,yBAAKA,UAAU,mBACX,8BACA,8BACA,6BACI,+BAEJ,6BACI,mC,2BCALI,EATQ,SAAC,GAAgB,IAAD,IAAdC,WAAc,MAAR,GAAQ,EACnC,OACI,yBAAKL,UAAU,mBACX,yBAAKM,IAAKC,IAASC,IAAI,eACvB,6EAAiBH,M,kBCJvBI,G,OAAS,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,SAAUC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SACjC,OACI,4BAAQZ,UAAU,SAASW,QAASA,EAASC,SAAUA,GACjDF,KAWdD,EAAOP,aAAe,CAClBS,QAAS,aACTC,UAAU,EACVF,SAAU,MAGCD,QCfFI,G,OAAb,2MAgBIC,WAAa,SAACC,GAEV,OADWA,EAAYC,QAAQ,OAAQ,IAC3BA,QAAQ,SAAU,KAlBtC,EAqBIC,WAAa,SAACC,GAEV,OAAOC,IADQ,aACIC,KAAKF,KAvBhC,EA0BIG,QAAU,SAACH,GAEP,OAAOA,EAASF,QADD,aACiB,KA5BxC,EA+BIM,eAAiB,SAACC,GAAQ,IAAD,EACW,EAAKC,MAA7BC,EADa,EACbA,KAAMC,EADO,EACPA,cACdH,EAAGI,kBACHD,EAAcD,EAAKG,OAlC3B,wEAqCc,IAAD,EAC4CC,KAAKL,MAA9CC,EADH,EACGA,KAAMd,EADT,EACSA,QAASmB,EADlB,EACkBA,OAAQC,EAD1B,EAC0BA,cACvBhB,EAA6BU,EAA7BV,YAAaiB,EAAgBP,EAAhBO,KAAMC,EAAUR,EAAVQ,MACrBf,EAAWW,KAAKf,WAAWC,GAC3BmB,EAAUL,KAAKZ,WAAWC,GAC1BiB,EAAON,KAAKR,QAAQH,GAC1B,OACI,wBAAIlB,UAAU,cAAcW,QAASA,GACjC,yBAAKX,UAAU,sBACX,yBAAKA,UAAU,yBAAyBM,IAAG,UPvDvC,wBOuDuC,OAAgB0B,GAAQxB,IAAKyB,IACxE,yBAAKjC,UAAU,0BAA0BiC,GACzC,uBAAGjC,UAAS,UAAK8B,EAAM,sCAEzBA,GACE,yBAAK9B,UAAU,qBACV+B,GACD,yBAAK/B,UAAU,wBACX,kBAAC,EAAD,CAAQW,QAASkB,KAAKP,gBAAtB,iFAEI,uBAAGtB,UAAU,uBAGrB,yBAAKA,UAAU,wBAAwBkC,GACvC,yBAAKlC,UAAU,yBAAyBmC,SA5DhE,GAAiCC,IAAMC,gBAA1BxB,EASFX,aAAe,CAClBS,QAAS,aACTW,eAAgB,aAChBQ,QAAQ,EACRC,eAAe,G,WCPjBO,E,YAcF,WAAYd,GAAQ,IAAD,8BACf,4CAAMA,KAeVe,eAAiB,SAACC,GAAQ,IAAD,EACsB,EAAKhB,MAAxCO,EADa,EACbA,cAAeU,EADF,EACEA,gBAEvB,EAAKC,UAAS,YACV,MAAO,CACHC,SAFwB,EAAfA,WAEcH,EAAK,KAAOA,MAItCT,GACDU,EAAgBD,IA1BL,EA8BnBd,cAAgB,SAACc,GAAQ,IAAD,EACuB,EAAKhB,MAAxCO,EADY,EACZA,cAAeU,EADH,EACGA,gBACnBV,GACAU,EAAgBD,IAjCL,EAqCnBI,eAAiB,SAACrB,GAAQ,IACdtB,EAAUsB,EAAGsB,OAAb5C,MACR,EAAKyC,SAAS,CACVI,YAAa7C,KAxCF,EA4CnB8C,WAAa,SAACC,GAAe,IACjBF,EAAgB,EAAKrD,MAArBqD,YACR,OAAIA,EACOE,EAAUC,QAAO,SAAAxB,GAEpB,OADcyB,IAAIzB,EAAM,QAAS,IAAI0B,cACvBC,QAAQN,EAAYK,kBAGnCH,GAlDP,EAAKvD,MAAQ,CACTqD,iBAAaO,EACbV,SAAU,MAJC,E,iFAQE,IP7BCvE,EO6BF,EACeyD,KAAKL,MAA5B8B,EADQ,EACRA,SAAU5D,EADF,EACEA,SACEwD,IAAIxD,EAAU,WAE9B4D,GPjCclF,EOiCqB,CAACmF,OAAQC,GPhCpD,uCAAO,WAAMF,GAAN,eAAAjF,EAAA,6DACHiF,EAAS,CACLvD,KAAMX,EAAMC,eACZoE,QAAS,CACLC,UAAU,EACVC,WAAY,QALjB,kBAUoBC,EAAgBxF,GAVpC,OAUOyF,EAVP,OAWCP,EAAS,CACLvD,KAAMX,EAAME,iBACZmE,QAAS,CACLC,UAAU,EACV/D,MAAOkE,KAfhB,gDAmBCP,EAAS,CACLvD,KAAMX,EAAMG,eACZkE,QAAS,CACLC,UAAU,EACVC,WAAW,EAAD,MAGlBG,QAAQC,MAAR,MA1BD,yDAAP,mDAAM,O,qCO2EU,IACJjB,EAAgBjB,KAAKpC,MAArBqD,YACR,OACI,yBAAK9C,UAAU,oBACX,yBAAKA,UAAU,mBAAf,gEACA,yBAAKA,UAAU,wBACX,kBAAC,EAAD,CAAWH,aAAciD,EAAahD,SAAU+B,KAAKe,qB,mCAMvD,IAAD,SAC2Bf,KAAKL,MAAjC9B,EADC,EACDA,SAAUqC,EADT,EACSA,cACVY,EAAad,KAAKpC,MAAlBkD,SACFqB,EAAkBnC,KAAKkB,WAAWrD,GAExC,OACI,wBAAIM,UAAU,gBACTgE,EAAgBC,KAAI,SAAAC,GACjB,OACI,kBAAC,EAAD,CACIC,IAAKD,EAAQE,KACb3C,KAAMyC,EACNpC,OAAQoC,EAAQtC,OAASe,EACzBhC,QAAS,EAAK4B,eAAe8B,KAAK,KAAMH,EAAQtC,MAChDF,cAAe,EAAKA,cAAc2C,KAAK,KAAMH,EAAQtC,MACrDG,cAAeA,U,+BAS7B,IAAD,EAC4BF,KAAKL,MAA9BkC,EADH,EACGA,SAAUC,EADb,EACaA,WAElB,OACI,yBAAK3D,UAAU,YACV6B,KAAKyC,eACLZ,GAAY,kBAAC,EAAD,MACZC,GAAc,kBAAC,EAAD,CAAgBtD,IAAKsD,KAClCA,IAAeD,GAAY7B,KAAK0C,kB,GAjH3BC,aAAjBlC,EAQKpC,aAAe,CAClBR,SAAU,GACV+C,gBAAiB,aACjBV,eAAe,GAoHR0C,mBARf,SAAyBhF,GACrB,MAAO,CACHC,SAAUgF,EAA8BjF,GACxCiE,SAAUjE,EAAMC,SAASgE,SACzBC,WAAYlE,EAAMC,SAASiE,cAIpBc,CAAyBnC,G,mCC3I3BlD,EAAQ,CACjBuF,mBAAoB,qBACpBC,qBAAsB,uBACtBC,mBAAoB,sBCNjB,IAAMrF,EAAc,SAACC,EAAO0E,GAC/B,OAAIA,EACO1E,EAAMqF,aAAanF,MAAMwE,GAE7B,ICEEY,G,OAAb,2MAcItF,MAAQ,CACJqC,QAAQ,GAfhB,EAkBInB,QAAU,WACN,EAAK+B,UAAS,SAAAjD,GAAK,MAAK,CACpBqC,QAASrC,EAAMqC,YApB3B,wEAwBc,IAAD,EAC2CD,KAAKL,MAA7CC,EADH,EACGA,KAAMuD,EADT,EACSA,SAAUC,EADnB,EACmBA,WAAYC,EAD/B,EAC+BA,QAC5BpD,EAAWD,KAAKpC,MAAhBqC,OACAqD,EAAuB1D,EAAvB0D,MAAOhD,EAAgBV,EAAhBU,KAAMF,EAAUR,EAAVQ,MACfmD,EAAYD,EAAQE,IAAOF,GAAOG,OAAO,SAAW,GAEtDC,EAAmB,GAOvB,OANIN,IACAM,EAAmB,CACfC,gBAAgB,qCAAD,OAAuCN,EAAvC,sBAA4DA,EAA5D,QAKnB,wBACIlF,UAAS,0BAAqBgF,GAAY,0BAC1CS,MAAOF,EACP5E,QAASkB,KAAKlB,SAEd,yBAAKX,UAAU,0BACX,yBAAKA,UAAU,+BAA+BoF,GAC9C,yBAAKpF,UAAU,8BAA8BiC,IAE/CH,GACE,yBAAK9B,UAAU,yBACX,yBAAKA,UAAU,6BAA6BmC,SAjDpE,GAAqCC,IAAMC,gBAA9B0C,EAQF7E,aAAe,CAClB8E,UAAU,EACVC,YAAY,EACZC,QAAS,G,WCEXQ,EAAY,KACZC,EAAW,GAGXC,E,YAgBF,WAAYpE,GAAQ,IAAD,8BACf,4CAAMA,KAyCVqE,iBAAmB,WACf,IAAMC,EAAqBC,IAASC,YAAY9C,IAAI,EAAK+C,eAAgB,YAEzE,GAAIH,EAAoB,CACpB,IAAMI,EAAMJ,EAAmBK,wBAAwBD,IACjDE,EAAc,EAAKA,YAAYC,QACrCD,EAAYE,UAAYJ,EAJP,GAI4BE,EAAYG,aAAe,IAhD7D,EAqDnBC,eAAiB,WACb,EAAK9D,SAAS,CACV+D,YAAapB,MAASqB,OAAShB,EAAYL,MAASsB,SAAWhB,KAvDpD,EAiFnB5C,WAAa,SAACC,GAAe,IACjBF,EAAgB,EAAKrD,MAArBqD,YACR,OAAIA,EACOE,EAAUC,QAAO,SAAAxB,GAEpB,OADcyB,IAAIzB,EAAM,QAAS,IAAI0B,cACvBC,QAAQN,EAAYK,kBAGnCH,GAzFQ,EA4FnBJ,eAAiB,SAACrB,GAAQ,IACdtB,EAAUsB,EAAGsB,OAAb5C,MACR,EAAKyC,SAAS,CACVI,YAAa7C,KA7FjB,EAAKR,MAAQ,CACTqD,iBAAaO,EACboD,YAAa,GAEjB,EAAKrB,UAAYC,MAASuB,QAAQ,OAAOtB,OAAO,oBAChD,EAAKuB,QAAUxB,MAASyB,MAAM,OAAOxB,OAAO,oBAC5C,EAAKyB,QAAU,KACf,EAAKC,aAAc,EACnB,EAAKC,WAAY,EACjB,EAAKhB,eAAiB7D,IAAM8E,YAC5B,EAAKd,YAAchE,IAAM8E,YAZV,E,iFAgBfrF,KAAK2E,iBACL3E,KAAKkF,QAAUI,YAAYtF,KAAK2E,eAnCtB,O,yCAsCKY,GAAY,IAAD,EAC4BvF,KAAKL,MAAnD6F,EADkB,EAClBA,kBAAmBvC,EADD,EACCA,aAAcpB,EADf,EACeA,SAEnC4D,GAAuBpE,IAAIkE,EAAW,uBACtCG,EAAiBH,EAAUC,oBAAsBA,EACjDG,EAActE,IAAI4B,EAAc,WACpByC,GAAkB1F,KAAKoF,YAExBI,IAAsBG,IAAgB9D,IACnD7B,KAAKoF,WAAY,EACjBpF,KAAK4F,oBAAoB5F,KAAK6F,cAAcL,MAE3CC,GAAuBzF,KAAKmF,cAAgBQ,IAC7C3F,KAAKmF,aAAc,EACnBnF,KAAKgE,sB,6CAKT8B,cAAc9F,KAAKkF,W,0CAoBH3I,IAGhBkF,EAFqBzB,KAAKL,MAAlB8B,UH1FT,SAAmBlF,GACtB,8CAAO,WAAMkF,GAAN,eAAAjF,EAAA,6DACHiF,EAAS,CACLvD,KAAMX,EAAMuF,mBACZlB,QAAS,CACLC,UAAU,EACVC,WAAY,QALjB,kBAUoBC,EAAoBxF,GAVxC,OAUOyF,EAVP,OAWK+D,IAAQ/D,KACRA,EAAKzF,EAAOwD,MAAQ,CAAC,CACjBK,MAAO,uGAGfqB,EAAS,CACLvD,KAAMX,EAAMwF,qBACZnB,QAAS,CACLC,UAAU,EACV/D,MAAOkE,KApBhB,gDAwBCP,EAAS,CACLvD,KAAMX,EAAMyF,mBACZpB,QAAS,CACLC,UAAU,EACVC,WAAW,EAAD,MAGlBG,QAAQC,MAAR,MA/BD,yDAAP,mDAAM,GG2FO8D,CAA8BzJ,M,oCAG7BwD,GACV,MAAO,CACH2B,OAAQC,EACR5B,OACAkG,UAAWjG,KAAKuD,UAChB2C,QAASlG,KAAKgF,W,uCAILmB,GACb,IAAMC,EAAK5C,IAAO2C,GAAMtB,OAClBwB,EAAK7C,IAAO2C,GAAMrB,SAClBwB,EAAK9C,IAAO2C,GAAMI,SACxB,OAAOH,EAAKvC,EAAYwC,EAAKvC,EAAWwC,I,qCAqB5B,IACJrF,EAAgBjB,KAAKpC,MAArBqD,YACR,OACI,yBAAK9C,UAAU,wBACX,yBAAKA,UAAU,uBAAf,kFACA,yBAAKA,UAAU,4BACX,kBAAC,EAAD,CAAWH,aAAciD,EAAahD,SAAU+B,KAAKe,qB,sCAOjE,OACI,yBAAK5C,UAAU,yBACX,uBAAGA,UAAU,oBACb,0BAAMA,UAAU,6BAAhB,uF,mCAKE,IAAD,SAC4D6B,KAAKL,MAAlEsD,EADC,EACDA,aAAc/C,EADb,EACaA,cAAesG,EAD5B,EAC4BA,YAAaC,EADzC,EACyCA,eAC1C7B,EAAgB5E,KAAKpC,MAArBgH,YAEF8B,EAAqB1G,KAAKkB,WAAW+B,GAE3C,OACI,kBAAC,IAAM0D,SAAP,KACKzG,GACD,yBAAK/B,UAAU,yBACX,kBAAC,EAAD,CAAQW,QAAS0H,GACb,uBAAGrI,UAAU,oBACZsI,GAAkBA,EAAe,GAAGrG,QAI7C,wBAAIjC,UAAU,mBAAmByI,IAAK5G,KAAKuE,aACtCmC,EAAmBtE,KAAI,SAACyE,EAASC,GAAW,IAClCxD,EAAmBuD,EAAnBvD,MAAOyD,EAAYF,EAAZE,SACRZ,EAAO,EAAKa,iBAAiB1D,GAC7BH,EAAW8D,OAAOd,GAAQc,OAAOF,GAAYE,OAAOrC,GACpDxB,EAAc6D,OAAOd,IAASc,OAAOrC,IAAkBqC,OAAOd,GAAQc,OAAOF,IAAaE,OAAOrC,GAEjGvB,GADOuB,EAAcuB,GACJc,OAAOF,GAAY,IAC1C,OACI,kBAAC,EAAD,CACIzE,IAAKwE,EACLlH,KAAMiH,EACN1D,SAAUA,EACVC,WAAYA,EACZwD,IAAKxD,GAAc,EAAKgB,eACxBf,QAASA,EAAU,EAAIA,EAAU,W,+BASnD,IAAD,EAC+CrD,KAAKL,MAAjD6F,EADH,EACGA,kBAAmB3D,EADtB,EACsBA,SAAUC,EADhC,EACgCA,WAErC,OACI,yBAAK3D,UAAU,gBACV6B,KAAKyC,eACLZ,GAAY,kBAAC,EAAD,MACZC,GAAc,kBAAC,EAAD,CAAgBtD,IAAKsD,KAClCD,IAAa2D,GAAqBxF,KAAKkH,iBACvCrF,GAAY2D,GAAqBxF,KAAK0C,kB,GAzL7BC,aAArBoB,EASK1F,aAAe,CAClB4E,aAAc,GACduC,kBAAmB,KACnBtF,eAAe,EACfsG,YAAa,cA2LN5D,mBATf,SAAyBhF,EAAzB,GAAwD,IAAtB4H,EAAqB,EAArBA,kBAC9B,MAAO,CACHvC,aAAckE,EAAkCvJ,EAAO4H,GACvD3D,SAAUjE,EAAMqF,aAAapB,SAC7BC,WAAYlE,EAAMqF,aAAanB,WAC/B2E,eAAgB5D,EAA8BjF,GAAOwD,QAAO,SAAAiB,GAAO,OAAIA,EAAQtC,OAASyF,QAIjF5C,CAAyBmB,GC1N3BqD,EAAb,2MACExJ,MAAQ,CACJyJ,UAAU,EACVC,UAAW,IAHjB,iFAMoBC,EAAGC,GACjBxH,KAAKa,SAAS,CACZwG,UAAU,EACVC,UAAWE,MATnB,+BAaY,IAAD,EAC2BxH,KAAKpC,MAA7ByJ,EADH,EACGA,SAAUC,EADb,EACaA,UACZG,EAAQpG,IAAIiG,EAAW,iBAAkB,IAC/C,OAAOD,EAAW,kBAAC,EAAD,CAAgB7I,IAAKiJ,IAAYzH,KAAKL,MAAMd,aAhBpE,GAA+B0B,IAAMoC,WCGxBhB,G,OAAS,QAiEP+F,E,YA9DX,WAAY/H,GAAQ,IAAD,8BACf,4CAAMA,KAaVgI,kBAAoB,SAACC,GACjB,EAAK/G,SAAS,CACVX,cAAe0H,EAAIC,WAhBR,EAoBnBjH,gBAAkB,SAACD,GACf,EAAKE,UAAS,YACV,MAAO,CACH2E,kBAFiC,EAAxBA,oBAEgC7E,EAAK,KAAOA,OAvB9C,EA4BnB6F,YAAc,WACV,EAAK3F,SAAS,CACV2E,kBAAmB,QA5BvB,EAAK5H,MAAQ,CACT4H,kBAAmB,KACnBtF,eAAe,GAJJ,E,iFASf,IAAM4H,EAAiBC,OAAOC,WAXN,sBAYxBF,EAAeG,YAAYjI,KAAK2H,mBAChC3H,KAAK2H,kBAAkBG,K,+BAuBjB,IAAD,EACwC9H,KAAKpC,MAA1CsC,EADH,EACGA,cAAesF,EADlB,EACkBA,kBACjBrD,GAAkBjC,IAAiBsF,EACnC0C,GAAsBhI,GAAgBsF,EAE5C,OACI,yBAAKrH,UAAU,OACVgE,GACG,kBAAC,EAAD,KACI,kBAAC,EAAD,CACAqD,kBAAmBA,EACnB5E,gBAAiBZ,KAAKY,gBACtBV,cAAeA,KAGtBgI,GACG,kBAAC,EAAD,KACI,kBAAC,EAAD,CACI1C,kBAAmBA,EACnBtF,cAAeA,EACfsG,YAAaxG,KAAKwG,oB,GAvD5BjG,IAAMoC,W,ukBCRxB,IAAMwF,GAAe,CACjBtG,UAAU,EACVC,WAAY,KACZhE,MAAO,IAGI,SAASsK,KAAuC,IAA/BxK,EAA8B,uDAAtBuK,GAAcE,EAAQ,uCAC1D,OAAOA,EAAOnK,MACV,KAAKX,EAAMC,eAEX,KAAKD,EAAME,iBAEX,KAAKF,EAAMG,eACP,OAAO,GAAP,GAAWE,EAAX,GAAqByK,EAAOzG,SAChC,QACI,OAAOhE,G,8jBCfnB,IAAMuK,GAAe,CACjBtG,UAAU,EACVC,WAAY,KACZhE,MAAO,IAGI,SAASsK,KAAuC,IAA/BxK,EAA8B,uDAAtBuK,GAAcE,EAAQ,uCAC1D,OAAOA,EAAOnK,MACV,KAAKX,EAAMuF,mBACP,OAAO,MAAIlF,EAAX,GAAqByK,EAAOzG,SAChC,KAAKrE,EAAMwF,qBAAX,MAC0CsF,EAAOzG,QAAtCC,EADX,EACWA,SAAUC,EADrB,EACqBA,WAAYhE,EADjC,EACiCA,MAC7B,OAAO,MAAIF,EAAX,CAAkBiE,WAAUC,aAAYhE,MAAM,MAAKF,EAAME,MAAZ,GAAsBA,KACvE,KAAKP,EAAMyF,mBACP,OAAO,MAAIpF,EAAX,GAAqByK,EAAOzG,SAChC,QACI,OAAOhE,G,OCLnB,MAAM0K,GAAQC,sBAAYC,0BAAgBC,GAAWC,8BAAoBC,0BAAgBC,OAEzF1E,IAAS2E,OACL,kBAAC,IAAD,CAAUP,MAAOA,IACb,kBAAC,EAAD,OAEJQ,SAASC,cAAc,Y","file":"static/js/main.bc627d53.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","export const BASE_URL = 'http://epg.domru.ru/';\r\n\r\nconst getData = async (catalog, params) => {\r\n    const url = new URL(`${BASE_URL}${catalog}`);\r\n    url.search = new URLSearchParams(params).toString();\r\n\r\n    const resp = await fetch(url);\r\n    if (!resp.ok) {\r\n        throw new Error(`Запрос по URL ${`${url}`}, вернул статус ${resp.status}`);\r\n    }\r\n    const body = await resp.json();\r\n    return body;\r\n}\r\n\r\n/*\r\n* domain\r\n*/\r\nexport const getChannels = (params) => {\r\n    return getData('channel/list', params);\r\n}\r\n\r\n/*\r\n* domain\r\n* date_from\r\n* date_to\r\n* xvid\r\n*/\r\nexport const getTeleprograms = (params) => {\r\n    return getData('program/list', params);\r\n}\r\n","import * as api from '../../api';\r\n\r\nexport const TYPES = {\r\n    CHANNELS_FETCH: 'CHANNELS_FETCH',\r\n    CHANNELS_SUCCESS: 'CHANNELS_SUCCESS',\r\n    CHANNELS_ERROR: 'CHANNELS_ERROR',\r\n}\r\n\r\nexport function fetchList(params) {\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: TYPES.CHANNELS_FETCH,\r\n            payload: {\r\n                fetching: true,\r\n                fetchError: null,\r\n            },\r\n        })\r\n\r\n        try {\r\n            const list = await api.getChannels(params);\r\n            dispatch({\r\n                type: TYPES.CHANNELS_SUCCESS,\r\n                payload: {\r\n                    fetching: false,\r\n                    items: list,\r\n                },\r\n            })\r\n        } catch(err) {\r\n            dispatch({\r\n                type: TYPES.CHANNELS_ERROR,\r\n                payload: {\r\n                    fetching: false,\r\n                    fetchError: err,\r\n                },\r\n            })\r\n            console.error(err);\r\n        }\r\n    }\r\n}","export const selectItems = state => {\r\n    return state.channels.items;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './styles.scss';\r\n\r\nconst CtrlInput = ({ currentValue, onChange }) => {\r\n    return <input type=\"text\" className=\"CtrlInput\" value={currentValue} onChange={onChange}/>\r\n}\r\n\r\nCtrlInput.propTypes = {\r\n    currentValue: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n}\r\n\r\nCtrlInput.defaultProps = {\r\n    currentValue: '',\r\n    onChange: () => {},\r\n}\r\n\r\nexport default CtrlInput;\r\n","import React from 'react';\r\nimport './style.scss';\r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"lds-css\">\r\n            <div className=\"lds-double-ring\">\r\n                <div></div>\r\n                <div></div>\r\n                <div>\r\n                    <div></div>\r\n                </div>\r\n                <div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './style.css';\r\nimport iconUrl from './ic_error.png';\r\n\r\nconst ErrorIndicator = ({err = ''}) => {\r\n    return (\r\n        <div className=\"error-indicator\">\r\n            <img src={iconUrl} alt=\"error-icon\" />\r\n            <div>{`Ошибка: ${err}`}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './styles.scss';\r\n\r\nconst Button = ({ children, onClick, disabled }) => {\r\n    return (\r\n        <button className=\"Button\" onClick={onClick} disabled={disabled}>\r\n            { children }\r\n        </button>\r\n    )\r\n}\r\n\r\nButton.propTypes = {\r\n    children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\r\n    onClick: PropTypes.func,\r\n    disabled: PropTypes.bool,\r\n}\r\n\r\nButton.defaultProps = {\r\n    onClick: () => {},\r\n    disabled: false,\r\n    children: null,\r\n}\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport last from 'lodash/last';\r\n\r\nimport Button from '../../../component/button';\r\n\r\nimport { BASE_URL } from '../../../api';\r\nimport './styles.scss';\r\n\r\nexport class ChannelItem extends React.PureComponent {\r\n    static propTypes = {\r\n        item: PropTypes.object.isRequired,\r\n        onClick: PropTypes.func,\r\n        onProgramClick: PropTypes.func,\r\n        active: PropTypes.bool,\r\n        isWidthTablet: PropTypes.bool,\r\n    }\r\n    \r\n    static defaultProps = {\r\n        onClick: () => {},\r\n        onProgramClick: () => {},\r\n        active: false,\r\n        isWidthTablet: false,\r\n    }\r\n\r\n    replaceTag = (description) => {\r\n        let desc = description.replace(/<p>/g, '');\r\n        return desc.replace(/<\\/p>/g, '');\r\n    }\r\n    \r\n    getBtnDesc = (descText) => {\r\n        const regExp = /([^]*)<br>/;\r\n        return last(regExp.exec(descText));\r\n    }\r\n    \r\n    getDesc = (descText) => {\r\n        const regExp = /([^]*)<br>/;\r\n        return descText.replace(regExp, '');\r\n    }\r\n\r\n    onProgramClick = (ev) => {\r\n        const { item, onLoadProgram } = this.props;\r\n        ev.stopPropagation();\r\n        onLoadProgram(item.xvid);\r\n    }\r\n\r\n    render() {\r\n        const { item, onClick, active, isWidthTablet } = this.props;\r\n        const { description, logo, title } = item;\r\n        const descText = this.replaceTag(description);\r\n        const btnDesc = this.getBtnDesc(descText);\r\n        const desc = this.getDesc(descText);\r\n        return (\r\n            <li className=\"ChannelItem\" onClick={onClick}>\r\n                <div className=\"ChannelItem__title\">\r\n                    <img className=\"ChannelItem__titleLogo\" src={`${BASE_URL}${logo}`} alt={title} />\r\n                    <div className=\"ChannelItem__titleText\">{title}</div>\r\n                    <i className={`${active ? `icon-arrow-up` : `icon-arrow-down`}`} />\r\n                </div>\r\n                { active && (\r\n                    <div className=\"ChannelItem__desc\">\r\n                        {isWidthTablet && (\r\n                        <div className=\"ChannelItem__btnWrap\">\r\n                            <Button onClick={this.onProgramClick}>\r\n                                Телепрограмма\r\n                                <i className=\"icon-arrow-right\" />\r\n                            </Button>\r\n                        </div>)}\r\n                        <div className=\"ChannelItem__descBtn\">{btnDesc}</div>\r\n                        <div className=\"ChannelItem__descText\">{desc}</div>\r\n                    </div>\r\n                ) }\r\n            </li>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport get from 'lodash/get';\r\n\r\nimport * as channelsActions from '../../store/channels/actions';\r\nimport * as ChannelsSelectors from '../../store/channels/selectors';\r\n\r\nimport CtrlInput from '../../component/ctrl-input';\r\nimport Spinner from '../../component/spinner';\r\nimport ErrorIndicator from '../../component/error-indicator';\r\nimport { ChannelItem } from './channel-item';\r\nimport { DOMAIN } from '../app';\r\nimport './styles.scss';\r\n\r\nclass Channels extends Component {\r\n\r\n    static propTypes = {\r\n        channels: PropTypes.array,\r\n        onSelectChannel: PropTypes.func,\r\n        isWidthTablet: PropTypes.bool,\r\n    }\r\n\r\n    static defaultProps = {\r\n        channels: [],\r\n        onSelectChannel: ()=>{},\r\n        isWidthTablet: false,\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            searchValue: undefined,\r\n            activeId: null,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { dispatch, channels } = this.props;\r\n        const hasChannels = get(channels, 'length');\r\n        if (!hasChannels) {\r\n            dispatch(channelsActions.fetchList({domain: DOMAIN}));\r\n        }\r\n    }\r\n    \r\n    onChannelClick = (id) => {\r\n        const { isWidthTablet, onSelectChannel } = this.props;\r\n\r\n        this.setState(({ activeId }) => {\r\n            return {\r\n                activeId: activeId === id ? null : id,\r\n            }\r\n        });\r\n\r\n        if (!isWidthTablet) {\r\n            onSelectChannel(id);\r\n        }\r\n    }\r\n\r\n    onLoadProgram = (id) => {\r\n        const { isWidthTablet, onSelectChannel } = this.props;\r\n        if (isWidthTablet) {\r\n            onSelectChannel(id);\r\n        }\r\n    }\r\n\r\n    onSearchChange = (ev) => {\r\n        const { value } = ev.target;\r\n        this.setState({\r\n            searchValue: value,\r\n        });\r\n    }\r\n\r\n    searchList = (listItems) => {\r\n        const { searchValue } = this.state;\r\n        if (searchValue) {\r\n            return listItems.filter(item => {\r\n                const title = get(item, 'title', '').toUpperCase();\r\n                return ~title.indexOf(searchValue.toUpperCase());\r\n            });\r\n        }\r\n        return listItems;\r\n    }\r\n\r\n    renderHeader() {\r\n        const { searchValue } = this.state;\r\n        return (\r\n            <div className=\"Channels__header\">\r\n                <div className=\"Channels__title\">Телеканалы</div>\r\n                <div className=\"Channels__filterWrap\">\r\n                    <CtrlInput currentValue={searchValue} onChange={this.onSearchChange} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    renderList() {\r\n        const { channels, isWidthTablet } = this.props;\r\n        const { activeId } = this.state;\r\n        const displayChannels = this.searchList(channels);\r\n\r\n        return(\r\n            <ul className=\"Channels__ul\">\r\n                {displayChannels.map(channel => {\r\n                    return (\r\n                        <ChannelItem\r\n                            key={channel.chid}\r\n                            item={channel}\r\n                            active={channel.xvid === activeId}\r\n                            onClick={this.onChannelClick.bind(null, channel.xvid)}\r\n                            onLoadProgram={this.onLoadProgram.bind(null, channel.xvid)}\r\n                            isWidthTablet={isWidthTablet}\r\n                        />\r\n                    )\r\n                })}\r\n                \r\n            </ul>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { fetching, fetchError } = this.props;\r\n        \r\n        return (\r\n            <div className=\"Channels\">\r\n                {this.renderHeader()}\r\n                {fetching && <Spinner />}\r\n                {fetchError && <ErrorIndicator err={fetchError} />}\r\n                {!fetchError && !fetching && this.renderList()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        channels: ChannelsSelectors.selectItems(state),\r\n        fetching: state.channels.fetching,\r\n        fetchError: state.channels.fetchError,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Channels)\r\n","import * as api from '../../api';\r\nimport isEmpty from 'lodash/isEmpty';\r\n\r\nexport const TYPES = {\r\n    TELEPROGRAMS_FETCH: 'TELEPROGRAMS_FETCH',\r\n    TELEPROGRAMS_SUCCESS: 'TELEPROGRAMS_SUCCESS',\r\n    TELEPROGRAMS_ERROR: 'TELEPROGRAMS_ERROR',\r\n}\r\n\r\nexport function fetchList(params) {\r\n    return async(dispatch) => {\r\n        dispatch({\r\n            type: TYPES.TELEPROGRAMS_FETCH,\r\n            payload: {\r\n                fetching: true,\r\n                fetchError: null,\r\n            },\r\n        })\r\n\r\n        try {\r\n            const list = await api.getTeleprograms(params);\r\n            if (isEmpty(list)) {\r\n                list[params.xvid] = [{\r\n                    title: 'Телепрограммы нет',\r\n                }];\r\n            }\r\n            dispatch({\r\n                type: TYPES.TELEPROGRAMS_SUCCESS,\r\n                payload: {\r\n                    fetching: false,\r\n                    items: list,\r\n                },\r\n            })\r\n        } catch(err) {\r\n            dispatch({\r\n                type: TYPES.TELEPROGRAMS_ERROR,\r\n                payload: {\r\n                    fetching: false,\r\n                    fetchError: err,\r\n                },\r\n            })\r\n            console.error(err);\r\n        }\r\n    }\r\n}","export const selectItems = (state, key) => {\r\n    if (key) {\r\n        return state.teleprograms.items[key];\r\n    }\r\n    return [];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\n\r\nimport './styles.scss';\r\n\r\nexport class TeleprogramItem extends React.PureComponent {\r\n    static propTypes = {\r\n        item: PropTypes.object.isRequired,\r\n        isFinish: PropTypes.bool,\r\n        isContinue: PropTypes.bool,\r\n        percent: PropTypes.number,\r\n    }\r\n    \r\n    static defaultProps = {\r\n        isFinish: false,\r\n        isContinue: false,\r\n        percent: 0,\r\n    }\r\n\r\n    state = {\r\n        active: false,\r\n    }\r\n\r\n    onClick = () => {\r\n        this.setState(state => ({\r\n            active: !state.active,\r\n        }));\r\n    }\r\n\r\n    render() {\r\n        const { item, isFinish, isContinue, percent } = this.props;\r\n        const { active } = this.state;\r\n        const { start, desc, title } = item;\r\n        const startTime = start ? moment(start).format('HH:mm') : '';\r\n        \r\n        let currentElemStyle = {};\r\n        if (isContinue) {\r\n            currentElemStyle = {\r\n                backgroundImage: `linear-gradient(to right, #c5cef9 ${percent}%, #ebecf0 ${percent}%)`,\r\n            };\r\n        }\r\n\r\n        return (\r\n            <li \r\n                className={`TeleprogramItem ${isFinish && 'TeleprogramItem_finish'}`}\r\n                style={currentElemStyle}\r\n                onClick={this.onClick}\r\n            >\r\n                <div className=\"TeleprogramItem__title\">\r\n                    <div className=\"TeleprogramItem__titleStart\">{startTime}</div>\r\n                    <div className=\"TeleprogramItem__titleText\">{title}</div>\r\n                </div>\r\n                { active && (\r\n                    <div className=\"TeleprogramItem__desc\">\r\n                        <div className=\"TeleprogramItem__descText\">{desc}</div>\r\n                    </div>\r\n                ) }\r\n            </li>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport get from 'lodash/get';\r\n\r\nimport * as teleprogramsActions from '../../store/teleprograms/actions';\r\nimport * as teleprogramsSelectors from '../../store/teleprograms/selectors';\r\nimport * as ChannelsSelectors from '../../store/channels/selectors';\r\n\r\nimport CtrlInput from '../../component/ctrl-input';\r\nimport Button from '../../component/button';\r\nimport Spinner from '../../component/spinner';\r\nimport ErrorIndicator from '../../component/error-indicator';\r\nimport { TeleprogramItem } from './teleprogram-item';\r\nimport { DOMAIN } from '../app';\r\nimport './styles.scss';\r\n\r\nconst secInHour = 3600;\r\nconst secInMin = 60;\r\nconst oneMinute = 60000;\r\n\r\nclass Teleprograms extends Component {\r\n\r\n    static propTypes = {\r\n        teleprograms: PropTypes.array,\r\n        selectedChannelId: PropTypes.string,\r\n        isWidthTablet: PropTypes.bool,\r\n        onBackClick: PropTypes.func,\r\n    }\r\n\r\n    static defaultProps = {\r\n        teleprograms: [],\r\n        selectedChannelId: null,\r\n        isWidthTablet: false,\r\n        onBackClick: ()=>{},\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            searchValue: undefined,\r\n            currentTime: 0,\r\n        }\r\n        this.startTime = moment().startOf('day').format('YYYY-MM-DD HH:mm');\r\n        this.endTime = moment().endOf('day').format('YYYY-MM-DD HH:mm');\r\n        this.timerId = null;\r\n        this.firstScroll = true;\r\n        this.fetchData = true;\r\n        this.currentProgram = React.createRef();\r\n        this.programList = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getCurrentTime();\r\n        this.timerId = setInterval(this.getCurrentTime, oneMinute);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { selectedChannelId, teleprograms, fetching } = this.props;\r\n        \r\n        const isPrevProgramsEmpty = !get(prevProps, 'teleprograms.length');\r\n        const isNewChannelId = prevProps.selectedChannelId !== selectedChannelId;\r\n        const hasPrograms = get(teleprograms, 'length');\r\n        const fetchData = isNewChannelId || this.fetchData;\r\n                \r\n        if (fetchData && selectedChannelId && !hasPrograms && !fetching) {\r\n            this.fetchData = false;\r\n            this.getTeleprogramsList(this.prepareParams(selectedChannelId));\r\n        }\r\n        if ((isPrevProgramsEmpty || this.firstScroll) && hasPrograms) {\r\n            this.firstScroll = false;\r\n            this.scrollListToElem();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerId);\r\n    }\r\n\r\n    scrollListToElem = () => {\r\n        const currentProgramNode = ReactDOM.findDOMNode(get(this.currentProgram, 'current'));\r\n        const heightHeader = 90;\r\n        if (currentProgramNode) {\r\n            const top = currentProgramNode.getBoundingClientRect().top;\r\n            const programList = this.programList.current;\r\n            programList.scrollTop = top - heightHeader - programList.clientHeight / 2;\r\n            \r\n        }\r\n    }\r\n\r\n    getCurrentTime = () => {\r\n        this.setState({\r\n            currentTime: moment().hour() * secInHour + moment().minute() * secInMin,\r\n        })\r\n    }\r\n\r\n    getTeleprogramsList(params) {\r\n        const { dispatch } = this.props;\r\n        \r\n        dispatch(teleprogramsActions.fetchList(params));\r\n    }\r\n\r\n    prepareParams(xvid) {\r\n        return {\r\n            domain: DOMAIN,\r\n            xvid,\r\n            date_from: this.startTime,\r\n            date_to: this.endTime,\r\n        }\r\n    }\r\n\r\n    getTimeInSeconds(time) {\r\n        const hh = moment(time).hour();\r\n        const mm = moment(time).minute();\r\n        const ss = moment(time).second();\r\n        return hh * secInHour + mm * secInMin + ss;\r\n    }\r\n\r\n    searchList = (listItems) => {\r\n        const { searchValue } = this.state;\r\n        if (searchValue) {\r\n            return listItems.filter(item => {\r\n                const title = get(item, 'title', '').toUpperCase();\r\n                return ~title.indexOf(searchValue.toUpperCase());\r\n            });\r\n        }\r\n        return listItems;\r\n    }\r\n\r\n    onSearchChange = (ev) => {\r\n        const { value } = ev.target;\r\n        this.setState({\r\n            searchValue: value,\r\n        });\r\n    }\r\n\r\n    renderHeader() {\r\n        const { searchValue } = this.state;\r\n        return (\r\n            <div className=\"Teleprograms__header\">\r\n                <div className=\"Teleprograms__title\">Телепрограмма</div>\r\n                <div className=\"Teleprograms__filterWrap\">\r\n                    <CtrlInput currentValue={searchValue} onChange={this.onSearchChange} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderMessage() {\r\n        return (\r\n            <div className=\"Teleprograms__message\">\r\n                <i className=\"icon-arrow-left\"/>\r\n                <span className=\"Teleprograms__messageText\">Выберите канал!</span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderList() {\r\n        const { teleprograms, isWidthTablet, onBackClick, checkedChannel } = this.props;\r\n        const { currentTime } = this.state;\r\n\r\n        const displayTeleprogram = this.searchList(teleprograms);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {isWidthTablet && (\r\n                <div className=\"Teleprograms__btnBack\">\r\n                    <Button onClick={onBackClick}>\r\n                        <i className=\"icon-arrow-left\" />\r\n                        {checkedChannel && checkedChannel[0].title}\r\n                    </Button>\r\n                </div>)}\r\n                    \r\n                <ul className=\"Teleprograms__ul\" ref={this.programList}>\r\n                    {displayTeleprogram.map((program, index) => {\r\n                        const {start, duration} = program;\r\n                        const time = this.getTimeInSeconds(start);\r\n                        const isFinish = Number(time) + Number(duration) < Number(currentTime);\r\n                        const isContinue = (Number(time) <= Number(currentTime)) && (Number(time) + Number(duration) >= Number(currentTime));\r\n                        const pass = currentTime - time;\r\n                        const percent = pass / Number(duration) * 100;\r\n                        return (\r\n                            <TeleprogramItem \r\n                                key={index}\r\n                                item={program}\r\n                                isFinish={isFinish}\r\n                                isContinue={isContinue}\r\n                                ref={isContinue && this.currentProgram}\r\n                                percent={percent > 0 ? percent : 0}\r\n                                />\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n    \r\n    render() {\r\n        const { selectedChannelId, fetching, fetchError } = this.props;\r\n        \r\n        return (\r\n            <div className=\"Teleprograms\">\r\n                {this.renderHeader()}\r\n                {fetching && <Spinner />}\r\n                {fetchError && <ErrorIndicator err={fetchError} />}\r\n                {!fetching && !selectedChannelId && this.renderMessage()}\r\n                {!fetching && selectedChannelId && this.renderList()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, { selectedChannelId }) {\r\n    return {\r\n        teleprograms: teleprogramsSelectors.selectItems(state, selectedChannelId),\r\n        fetching: state.teleprograms.fetching,\r\n        fetchError: state.teleprograms.fetchError,\r\n        checkedChannel: ChannelsSelectors.selectItems(state).filter(channel => channel.xvid === selectedChannelId),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Teleprograms)\r\n","import React from 'react';\r\nimport get from 'lodash/get';\r\n\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport class ErrorWrap extends React.Component {\r\n  state = {\r\n      hasError: false,\r\n      errorInfo: '',\r\n  };\r\n  \r\n  componentDidCatch(_, info) {\r\n      this.setState({\r\n        hasError: true,\r\n        errorInfo: info,\r\n      })\r\n  }\r\n\r\n  render() {\r\n      const { hasError, errorInfo } = this.state;\r\n      const stack = get(errorInfo, 'componentStack', '');\r\n      return hasError ? <ErrorIndicator err={stack} /> : this.props.children;\r\n  }\r\n}","import React from 'react';\r\nimport Channels from '../channels';\r\nimport Teleprograms from '../teleprograms';\r\nimport { ErrorWrap } from '../../component/error-wrap';\r\n\r\nimport './styles.scss';\r\n\r\n//Это не контейнер но расположен в каталоге container - т.к. в реальном приложении здесь запрашивалась бы информация о пользователе и производилась маршрутизация.\r\nexport const DOMAIN = 'oren';\r\nexport const mediaWidthTablet = '(max-width: 800px)';\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            selectedChannelId: null,\r\n            isWidthTablet: false,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const mediaQueryList = window.matchMedia(mediaWidthTablet);\r\n        mediaQueryList.addListener(this.handleMediaChange);\r\n        this.handleMediaChange(mediaQueryList);\r\n    }\r\n\r\n    handleMediaChange = (mql) => {\r\n        this.setState({\r\n            isWidthTablet: mql.matches,\r\n        })\r\n    };\r\n\r\n    onSelectChannel = (id) => {\r\n        this.setState(({ selectedChannelId }) => {\r\n            return {\r\n                selectedChannelId: selectedChannelId === id ? null : id,\r\n            }\r\n        });\r\n    }\r\n\r\n    onBackClick = () => {\r\n        this.setState({\r\n            selectedChannelId: null,\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { isWidthTablet, selectedChannelId } = this.state;\r\n        const displayChannels = isWidthTablet ? !selectedChannelId : true;\r\n        const displayTeleprograms = isWidthTablet ? selectedChannelId : true;\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                {displayChannels && (\r\n                    <ErrorWrap>\r\n                        <Channels\r\n                        selectedChannelId={selectedChannelId}\r\n                        onSelectChannel={this.onSelectChannel}\r\n                        isWidthTablet={isWidthTablet} />\r\n                    </ErrorWrap>\r\n                )}\r\n                {displayTeleprograms && (\r\n                    <ErrorWrap>\r\n                        <Teleprograms\r\n                            selectedChannelId={selectedChannelId}\r\n                            isWidthTablet={isWidthTablet}\r\n                            onBackClick={this.onBackClick} />\r\n                    </ErrorWrap>\r\n                )}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import { TYPES } from './actions';\r\n\r\nconst initialState = {\r\n    fetching: false,\r\n    fetchError: null,\r\n    items: [],\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case TYPES.CHANNELS_FETCH:\r\n            return {...state, ...action.payload}\r\n        case TYPES.CHANNELS_SUCCESS:\r\n            return {...state, ...action.payload}\r\n        case TYPES.CHANNELS_ERROR:\r\n            return {...state, ...action.payload}\r\n        default:\r\n            return state;\r\n    }\r\n}","import { TYPES } from './actions';\r\n\r\nconst initialState = {\r\n    fetching: false,\r\n    fetchError: null,\r\n    items: {},\r\n}\r\n\r\nexport default function reducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case TYPES.TELEPROGRAMS_FETCH:\r\n            return {...state, ...action.payload}\r\n        case TYPES.TELEPROGRAMS_SUCCESS:\r\n            const {fetching, fetchError, items} = action.payload;\r\n            return {...state, fetching, fetchError, items: {...state.items, ...items}}\r\n        case TYPES.TELEPROGRAMS_ERROR:\r\n            return {...state, ...action.payload}\r\n        default:\r\n            return state;\r\n    }\r\n}","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {createStore, applyMiddleware, combineReducers} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\nimport App from './container/app';\r\nimport * as redusers from './store/reducers';\r\n\r\nimport './index.scss';\r\n\r\nconst store = createStore(combineReducers(redusers), composeWithDevTools(applyMiddleware(thunk)))\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>,\r\n    document.querySelector('#root'));\r\n"],"sourceRoot":""}